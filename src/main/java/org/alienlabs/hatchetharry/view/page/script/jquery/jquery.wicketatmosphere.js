(function(a){jQuery.fn.wicketAtmosphere=function(d){var b=false;var c;function f(g){if(g.transport!=="polling"&&g.state==="messageReceived"){a.atmosphere.log("info",["response.responseBody: "+g.responseBody]);if(g.status===200){Wicket.Ajax.process(g.responseBody)}}else{if(g.state==="opening"){}}}var e=a.atmosphere.subscribe(d.url,!b?f:null,a.atmosphere.request=d);b=true;c=a.atmosphere.response;a(window).bind("beforeunload",function(){b=false;a.atmosphere.unsubscribe()})}}(jQuery));